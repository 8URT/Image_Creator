{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-3xl font-light text-gray-800 mb-2 tracking-tight">Admin Dashboard</h1>
    <p class="text-gray-600">Overview of system statistics and recent activity</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
    <div class="admin-card p-6">
        <h3 class="text-gray-600 text-sm font-semibold mb-2">Total Users</h3>
        <p class="text-3xl font-light text-gray-800">{{ total_users }}</p>
    </div>
    <div class="admin-card p-6">
        <h3 class="text-gray-600 text-sm font-semibold mb-2">Active Users</h3>
        <p class="text-3xl font-light text-gray-800">{{ active_users }}</p>
    </div>
    <div class="admin-card p-6">
        <h3 class="text-gray-600 text-sm font-semibold mb-2">Admin Users</h3>
        <p class="text-3xl font-light text-gray-800">{{ admin_users }}</p>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <div class="admin-card p-6">
        <h2 class="text-xl font-light text-gray-800 mb-4 tracking-tight">Recent Activity (Last 24h)</h2>
        <div class="space-y-2">
            {% if recent_logs %}
                {% for log in recent_logs %}
                <div class="flex justify-between items-center p-3 bg-gray-100 rounded">
                    <div>
                        <span class="text-gray-800 font-medium">{{ log.user.email }}</span>
                        <span class="text-gray-600 text-sm ml-2">used</span>
                        <span class="text-gray-800">{{ log.tool_name }}</span>
                    </div>
                    <span class="text-gray-600 text-xs">{{ log.timestamp.strftime('%H:%M') }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-gray-600">No recent activity</p>
            {% endif %}
        </div>
    </div>

    <div class="admin-card p-6">
        <h2 class="text-xl font-light text-gray-800 mb-4 tracking-tight">Tool Usage (Last 24h)</h2>
        <div class="space-y-2">
            {% if tool_stats %}
                {% for tool_name, count in tool_stats %}
                <div class="flex justify-between items-center p-3 bg-gray-100 rounded">
                    <span class="text-gray-800">{{ tool_name }}</span>
                    <span class="text-gray-600 font-semibold">{{ count }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-gray-600">No tool usage data</p>
            {% endif %}
        </div>
    </div>
</div>

<div class="mt-6 flex gap-3">
    <a href="{{ url_for('admin.users') }}" class="admin-button">Manage Users</a>
    <a href="{{ url_for('admin.templates') }}" class="admin-button">Manage Templates</a>
    <a href="{{ url_for('admin.logs') }}" class="admin-button">View Logs</a>
</div>
{% endblock %}
